<html>

<head>
	<title>
		Discord Auth Page
	</title>
	<meta charset="utf-8">
	<meta property="og:title" content="Discord Authentication">
	<meta property="og:description" content="Please connect to your discord account to continue">
    <link rel="stylesheet" href="/assets/style/discordColors.css">
    <link rel="stylesheet" href="/assets/style/waterfall.css">
    <link rel="stylesheet" href="/assets/style/discordSwitchButtons.css">
    <link rel="stylesheet" href="/assets/style/discordRadioButtons.css">
    <link rel="stylesheet" href="/assets/style/discordSliders.css">

</head>

<body>


    <h1>DirtyBiologistan</h1>
    
    <div id="mainbox" class="noselect">
  
    </div>

    
    
    <div class="confirm_button" id="confirm_button">
        <div class="centered">
            <div class="padded carefultext">Careful - you have unsaved changes!</div>
            
            <div class="buttons padded">

                <!-- <div>
                    <button id="button_settings_discard_changes" onclick="_settings_reset_default()">Reset as first open</button>
                </div> -->
                 <div>
                    <button id="button_settings_save_changes" onclick="_settings_send_datas()">Send changes</button>
                </div>
            </div>

        </div>

    </div>  
     

    <div id="contents_diverged" class=" opened">
        <div class="centered">
            <div class="padded carefultext">Contents diverged from the original page</div>
            
            <div class="buttons padded">

                <div>
                    <button id="button_settings_discard_changes" onclick="_settings_reset_default()">Reset as original page</button>
                </div>
            </div>

        </div>

    </div> 

</body>
<style>


</style>


<script src="/socket.io/socket.io.js"></script>
<script src="/assets/script/basicFunctions.js"></script>
<script src="/assets/script/waterfall_v2.js"></script>
<script>


window.onload = () => {
    Waterfall.createWaterfall(document.getElementById("mainbox"), settingList)
    very_default_settings = Waterfall.getSettings()
    
    default_settings = Waterfall.getSettings()
    
    let reset_from_opening_page_button = document.getElementById("contents_diverged")

    setInterval(() => {
        try {
            if(JSON.stringify(Waterfall.getSettings()) != JSON.stringify(default_settings)) {
                confirm_button.className = confirm_button.className.split(" opened").join("")+" opened"
            } else {
                confirm_button.className = confirm_button.className.split(" opened").join("")
            }
            
            if(JSON.stringify(Waterfall.getSettings()) != JSON.stringify(very_default_settings)) {
                reset_from_opening_page_button.className = reset_from_opening_page_button.className.split(" opened").join("")+" opened"
            } else {
                reset_from_opening_page_button.className = reset_from_opening_page_button.className.split(" opened").join("")
            }
        } catch(e) {
            
        }
    }, 200)

}

function _settings_reset_default() {
    Waterfall.clearWaterfall(document.getElementById("mainbox"))
    Waterfall.createWaterfall(document.getElementById("mainbox"), settingList)
    default_settings = Waterfall.getSettings()
}

function _settings_send_datas() {
    default_settings = Waterfall.getSettings()
}



</script>

</html>